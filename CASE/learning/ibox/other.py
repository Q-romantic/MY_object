# -*- coding: utf-8 -*-
"""
@Time    : 2022/11/23  023 下午 21:51
@Author  : Jan
@File    : 拼多多.py
"""
import json
import random
import time

import execjs

""" {} """

# i=[100,35,176,49,132,199,241,103,170,76,186,47,221,176,12,143,198,161,77,175,214,5,154,210,20,35,238,50,14,4,13,125,26,92,60,13,146,205,238,11,201,116,158,188,154,61,254,160,7,139,156,23,71,135,218,115,92,149,182,175,86,30,233,15,222,213,231,133,244,39,254,216,187,175,77,16,74,164,52,107,227,165,248,182,30,142,25,25,178,134,36,79,207,191,137,143,79,20,116,220,62,150,173,186,51,28,39,134,246,118,162,116,104,221,128,58,36,57,41,113,243,168,211,169,89,168,143,171,255,218,60,6,71,19,187,71,73,227,158,146,57,128,201,44,218,152,157,187,161,102,180,101,106,209,41,221,237,96,138,42,88,104,147,162,89,134,85,88,153,55,128,82,209,103,252,156,216,168,58,118,161,235,199,43,208,158,10,110,74,223,2,123,127,141,54,184,174,27,24,105,105,76,10,101,174,44,126,23,47,3,216,75,250,207,161,59,171,210,189,128,179,107,206,85,37,198,68,171,7,104,41,246,31,220,69,124,122,33,171,14,196,208,56,39,173,101,118,191,160,32,165,114,110,123,51,43,84,88,150,3,79,138,39,90,126,183,227,96,132,6,100,214,39,25,129,187,177,249,177,241,10,45,111,209,155,255,171,101,124,130,122,164,189,51,64,119,105,38,222,94,108,34,39,129,4,177,60,170,38,245,147,152,196,115,60,146,198,99,169,244,50,35,83,123,36,21,37,163,141,113,222,217,178,142,200,249,125,17,94,10,186,39,225,133,49,252,189,106,202,242,85,81,11,78,55,175,213,233,151,55,228,22,4,27,216,157,34,70,112,40,207,14,29,220,213,31,27,127,141,65,206,97,115,113,70,241,229,170,97,117,167,171,68,9,112,27,178,207,203,192,218,3,171,20,92,152,20,221,39,98,134,129,70,153,182,115,0,48,75,221,213,80,88,117,5,160,132,101,91,167,96,121,61,169,171,56,184,228,118,161,101,125,179,52,249,242,77,109,147,243,98,175,34,129,78,7,179,153,114,89,96,237,80,104,186,119,211,116,218,247,2,181,159,191,246,172,64,243,78,71,9,34,62,55,144,27,169,49,23,223,170,45,157,235,202,246,60,68,52,107,167,146,200,151,113,82,71,61,222,253,148,224,2,120,81,8,206,37,188,102,178,244,149,47,144,231,194,159,164,86,17,152,186,153,114,19,147,48,130,195,19,204,249,32,159,119,102,191,210,167,19,159,140,236,209,4,152,50,190,150,32,59,13,42,240,67,185,13,35,243,43,154,58,105,121,124,18,160,45,158,80,245,215,107,21,38,12,78,79,122,183,44,128,206,15,231,25,194,247,222,151,189,120,151,110,152,255,227,110,93,114,44,253,65,49,244,50,176,209,128,176,236,2,128,183,154,216,73,54,12,36,170,98,207,31,62,95,12,209,112,129,158,182,130,53,121,199,35,58,24,90,223,230,70,184,26,160,199,80,234,109,29,170,216,165,144,61,16,86,37,161,167,73,155,75,162,188,57,87,248,139,31,143,158,189,249,171,28,149,193,114,210,165,189,133,137,100,16,63,128,83,237,182,128,241,206,91,200,162,155,250,113,244,45,84,146,231,47,63,248,210,11,92,31,78,125,151,244,87,148,121,240,7,165,92,82,59,11,133,202,100,125,158,132,66,151,30,151,4,7,230,108,237,156,181,2,137,62,84,177,88,77,236,96,73,27,38,109,86,132,17,80,204,143,120,161,21,29,206,49,228,116,161,84,231,45,72,164,139,156,126,195,169,28,54,246,20,1,4,186,170,164,77,233,74,68,190,7,106,255,144,153,197,194,211,88,244,28,86,151,161,136,195,159,92,118,159,212,219,196,163,204,199,29,27,18,54,15,139,37,49,166,2,162,234,162,217,103,108,116,48,34,23,253,226,100,189,186,111,114,167,129,201,143,85,221,116,31,220,208,179,72,40,210,213,125,135,44,220,69,96,81,102,154,129,179,118,126,16,191,148,87,211,65,252,207,148,63,160,6,209,214,3,44,166,224,239,73,144,150,247,70,43,18,125,72,95,201,26,254,236,100,26,95,69,97,177,62,31,70,215,18,132,173,202,242,234,185,218,191,61,98,216,158,241,140,0,104,176,102,122,122,121,133,197,152,33,63,34,165,57,135,60,189,22,218,69,172,159,126,144,157,60,105,41,176,182,53,227,13,74,50,136,158,83,199,164,109,40,169,1,30,123,41,226,54,112,5,127,0,110,56,154,96,233,167,21,252,78,72,55,168,134,221,81,43,229,6,220,93,171,204,248,86,186,10,86,158,43,117,3,127,4,11,11,91,212,29,78,187,20,100,24,12,198,20,13,32,150,88,203,78,34,228,216,108,119,243,142,54,18,184,230,240,98,252,50,20,211,224,93,20,125,58,39,177,5,106,227,209,73,120,180,85,216,151,151,8,139,22,252,74,91,94,144,2,149,143,84,156,88,235,115,35,21,36,43,7,90,5,68,221,144,236,122,91,145,255,99,208,186,148,233,253,161,154,157,184,35,165,36,79,72,85,234,98,218,182,182,74,46,56,246,229,55,130,252,80,88,166,137,249,249,174,244,228,213,154,80,180,35,245,198,174,75,180,190,210,114,44,122,154,203,121,173,101,158,31,189,24,213,246,117,252,204,156,200,186,81,8,6,139,52,118,51,16,106,243,143,100,37,88,231,220,145,84,13,92,46,100,6,167,17,25,66,115,243,82,170,165,208,228,202,109,161,226,189,162,245,66,148,198,242,57,5,45,65,44,53,95,30,68,84,163,195,17,177,92,189,29,235,147,44,32,234,229,138,118,114,14,116,97,146,117,176,8,187,149,9,150,189,221,163,56,104,201,112,106,32,64,83,163,64,102,8,101,129,197,109,93,206,219,189,140,80,80,231,16,105,64,121,250,45,121,122,61,202,242,124,51,131,67,180,15,103,95,186,8,54,71,78,146,199,225,221,91,87,34,88,227,138,204,68,110,118,16,190,143,168,236,144,244,156,77,185,7,123,124,14,170,80,63,253,241,246,104,59,1,116,74,120,34,28,162,108,28,210,157,127,95,135,131,121,146,49,239,28,199,4,210,72,73,85,169,78,159,66,62,49,197,201,146,1,238,13,34,78,39,178,20,64,184,41,116,239,48,75,20,48,92,130,55,247,18,227,225,76,238,13,201,93,97,144,151,197,255,152,129,35,226,72,189,8,213,122,100,122,179,22,76,101,152,110,226,232,226,179,182,242,223,33,16,86,57,102,116,86,207,157,144,233,3,241,94,81,158,7,242,6,247,152,132,202,58,144,62,204,21,51,169,99,150,47,107,243,67,192,34,153,29,254,57,57,12,139,126,49,141,144,135,94,140,43,242,79,62,109,39,125,248,44,224,6,36,211,243,206,8,122,102,218,244,72,43,115,168,153,193,97,180,177,249,43,121,154,134,46,137,166,217,93,158,233,106,104,222,120,64,34,86,52,230,59,68,249,110,37,253,160,143,97,86,40,113,231,195,197,235,88,189,146,83,249,210,36,37,146,97,202,106,13,229,198,29,113,51,94,142,212,227,209,14,10,138,236,98,197,253,107,157,183,46,92,79,82,139,0,173,155,104,249,11,246,38,66,173,26,203,153,171,254,212,243,64,72,240,192,118,180,118,191,188,91,120,129,149,15,124,189,181,124,140,50,179,47,132,95,165,226,19,123,154,53,245,248,67,72,4,238,139,16,88,75,184,221,236,185,58,21,133,173,32,221,238,58,166,67,234,136,156,187,115,184,120,146,233,18,109,91,215,11,64,111,149,135,209,27,176,193,72,106,100,108,167,11,77,237,166,90,33,139,97,182,79,97,171,235,108,154,119,76,37,11,0,167,251,126,92,97,111,44,66,211,157,248,31,38,160,11,84,58,242,149,111,41,200,208,214,18,71,76,160,97,134,18,2,200,103,43,73,243,90,170,198,101,200,242,221,48,32,45,207,5,135,218,129,16,0,248,111,164,195,168,114,170,136,120,146,193,12,118,116,51,133,249,170,33,152,96,43,57,122,109,32,86,253,193,140,183,73,5,225,229,205,151,14,65,156,70,14,251,120,237,225,4,33,184,244,189,202,220,2,192,184,141,134,197,150,4,50,236,78,39,88,89,223,106,214,68,248,240,228,179,145,114,114,216,135,168,92,59,140,152,255,248,131,147,238,54,94,87,158,26,145,204,196,213,54,236,76,237,52,74,176,249,47,165,10,37,180,93,175,110,197,213,65,78,183,165,128,195,190,60,91,240,208,34,188,198,38,166,57,184,131,255,172,132,152,68,32,6,74,14,54,19,81,115,187,220,216,145,202,105,121,229,133,199,162,66,253,80,223,34,141,223,109,184,189,69,149,15,18,219,92,193,177,161,52,164,203,152,69,82,26,114,53,174,10,194,66,189,15,62,9,167,192,108,171,1,184,131,2,85,188,190,71,16,250,185,127,153,155,52,214,202,245,163,72,139,74,147,241,217,104,148,98,103,24,6,211,136,112,112,84,117,22,119,224,116,53,121,41,162,132,162,20,100,235,161,129,32,66,57,254,107,107,208,80,89,25,79,111,198,31,14,192,198,199,115,183,207,7,51,65,88,4,25,106,102,1,226,162,24,242,161,132,107,6,45,47,39,144,36,149,20,166,252,190,222,87,53,167,70,131,46,174,95,231,234,250,189,110,36,147,2,26,135,217,66,18,39,199,220,194,239,153,31,139,120,175,225,62,82,56,181,245,228,255,79,156,112,35,121,105,130,96,200,139,59,5,153,24,50,127,194,80,243,78,250,21,208,137,162,120,165,143,44,157,99,15,12,177,73,240,26,137,29,242,224,150,21,62,30,2,165,64,40,172,108,91,119,104,137,229,197,9,211,154,31,200,169,179,154,187,84,138,102,26,109,154,174,248,178,39,55,246,13,253,205,200,36,168,213,218,234,89,13,198,122,26,200,97,133,112,142,214,34,174,105,209,225,49,161,187,255,127,188,38,57,134,148,192,19,253,198,122,139,119,172,191,74,239,222,41,171,247,6,153,209,252,169,41,235,189,231,8,245,178,105,211,226,183,176,81,126,31,93,237,171,128,18,165,73,66,38,46,158,255,237,34,60,166,172,186,204,156,23,131,208,236,82,0,231,15,98,21,17,43,56,47,117,14,206,152,221,126,183,91,101,194,26,63,118,148,108,85,38,117,189,22,124,20,33,71,23,65,220,139,80,169,128,240,209,254,33,101,240,24,90,88,37,147,240,25,225,126,10,48,52,133,148,82,6,171,168,94,145,127,147,205,215,184,168,9,45,188,145,213,127,37,243,127,32,168,30,147,245,48,74,129,223,108,48,108,163,88,84,214,59,217,248,226,223,234,250,189,246,136,116,30,158,10,218,160,166,55,51,57,98,90,46,53,139,225,118,252,48,245,96,143,56,22,130,101,164,161,215,163,23,69,127,149,8,204,58,132,52,237,141,145,136,91,111,117,66,153,37,78,200,153,73,189,61,13,147,85,10,101,22,24,242,79,204,56,207,229,58,37,95,112,89,122,208,104,34,80,210,137,30,89,145,171,104,203,126,177,89,164,110,246,253,114,72,225,182,234,88,187,74,112,126,71,129,99,143,198,99,91,93,151,201,33,150,191,136,169,157,72,66,133,22,9,0,221,96,68,230,91,163,76,38,214,147,192,114,171,91,96,203,159,82,136,181,118,212,59,206,102,14,37,188,159,171,155,209,245,215,228,214,72,6,146,25,52,82,150,122,21,168,251,120,151,198,14,223,12,221,216,85,42,149,41,150,128,75,180,3,101,163,130,52,164,129,61,1,21,58,183,177,198,48,50,108,205,203,157,182,244,83,198,200,177,160,240,227,115,96,205,183,174,80,129,254,37,89,237,123,34,254,245,169,234,240,144,100,70,227,201,240,208,141,162,139,159,199,184,239,159,8,70,142,133,6,24,210,182]

def get_params1():
    index = open('other.js', 'r', encoding='utf-8')
    js = execjs.compile(index.read())
    arr = js.call('get_i')
    # print(arr, type(arr))
    return arr

# i = get_params1()
# i = bytes(i)
# print(i)

def get_params(a, b):
    index = open('index.js', 'r', encoding='utf-8')
    js = execjs.compile(index.read())
    arr = js.call('get_sss_to_L', a, b)
    # print(arr)
    # asii = []
    # for i in arr:
    #     x = chr(int(i))
    #     asii.append(x)
    #     # break
    # arr = ''.join(asii)
    return arr


def get_sss():
    headers_list = []
    headers = {
        "X-WX-EXCLUDE-CREDENTIALS": "unionid, cloudbase-access-token, openid",
        "X-WX-REGION": "ap-beijing",
        "X-WX-GATEWAY-ID": "gw-1-1g2n1gd143d56b56",
        "HOST": "api-h5-tgw.ibox.art",
        "Accept-Language": "zh-CN",
        "IB-DEVICE-ID": "dfb3dd84aa254ea0920f11cf964ec43d",
        "IB-TRANS-ID": "d0d27b251d1546788f359750e81d5556",  # 可能会变
        "x-cloudbase-phone": "",
        "IB-PLATFORM-TYPE": "web",
        "content-type": "application/json",
        "User-Agent": "",
        "X-WX-ENV": "ibox-3gldlr1u1a8322d4",
        "X-WX-CALL-ID": "0.02830912142312636_1666694470058",  # 随机数_13位时间戳
        "X-WX-RESOURCE-APPID": "wxa2d0710b1323fd96",
        "X-WX-CONTAINER-PATH": "/nft-mall-web/v1.1/nft/user/getUserInfo",
    }
    call_id = f"{random.random()}_{str(int(time.time() * 1000))}"
    for k, v in headers.items():
        k = k.lower()
        if 'x-wx-call-id' == k:
            v = call_id
        headers_list.append({'key': k, 'value': v})
    header_body = {
        "method": "GET",
        "header": headers_list,
        "body": "undefined",
        "call_id": call_id
    }
    return json.dumps(header_body)

# print(get_sss())
key = "io3RNbg7qWGy5ZJePUrklQ=="
x = [138, 141, 209, 53, 184, 59, 169, 97, 178, 229, 146, 94, 61, 74, 228, 149]
sss = '{"method":"GET","header":[{"key":"x-wx-exclude-credentials","value":"unionid, cloudbase-access-token, openid"},{"key":"x-wx-region","value":"ap-beijing"},{"key":"x-wx-gateway-id","value":"gw-1-1g2n1gd143d56b56"},{"key":"host","value":"api-h5-tgw.ibox.art"},{"key":"accept-language","value":"zh-CN"},{"key":"ib-device-id","value":"11582baf51704c07af7b0a987ed57ef5"},{"key":"ib-trans-id","value":"79d0a7bc999448bd86fc7b5ef13d237c"},{"key":"x-cloudbase-phone","value":""},{"key":"ib-platform-type","value":"web"},{"key":"content-type","value":"application/json"},{"key":"user-agent","value":""},{"key":"x-wx-env","value":"ibox-3gldlr1u1a8322d4"},{"key":"x-wx-call-id","value":"0.5940741496223056_1668671793828"},{"key":"x-wx-resource-appid","value":"wxb5b2c81edbd4cf69"},{"key":"x-wx-container-path","value":"/nft-mall-web/nft/contentList"}],"body":"undefined","call_id":"0.5940741496223056_1668671793828"}'
L = get_params(sss, key)
print(L, type(L))


















































